<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EmePath</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="app">
      <aside class="rail">
        <div class="brand"><span class="badge">E</span><span>EmePath</span></div>
        <div class="rail-top">
          <div class="topTitle">Projects</div>
          <div class="controls"><button class="btn" id="createProject">New</button><button class="btn" id="pause">Pause</button><button class="btn" id="resume">Resume</button></div>
        </div>
        <div id="projects" class="projects"></div>
        <div class="section">
          <div class="section-head">
            <div class="topTitle">Agents</div>
            <div class="controls mini"><button class="btn sm" id="toggleAgents">Hide</button></div>
          </div>
          <div id="agentsWrap" class="coll"><div id="agents" class="agents"></div></div>
        </div>
        <div class="section">
          <div class="section-head">
            <div class="topTitle">Port Monitor</div>
            <div class="controls mini"><button class="btn sm" id="togglePorts">Hide</button></div>
          </div>
          <div id="portsWrap" class="coll"><div id="ports" class="ports"></div></div>
        </div>
        <div class="section">
          <div class="section-head">
            <div class="topTitle">Actions Feed</div>
            <div class="controls mini">
              <label style="display:flex;align-items:center;gap:4px;font-size:12px"><input type="checkbox" id="fltController" checked>Controller</label>
              <label style="display:flex;align-items:center;gap:4px;font-size:12px"><input type="checkbox" id="fltProcess" checked>Process</label>
              <label style="display:flex;align-items:center;gap:4px;font-size:12px"><input type="checkbox" id="fltAuto" checked>Auto</label>
              <button class="btn sm" id="toggleActions">Hide</button>
              <button class="btn sm" id="clearActions">Clear</button>
            </div>
          </div>
          <div id="actionsWrap" class="coll"><div id="actionsFeed" class="feed"></div></div>
        </div>
        <div class="section">
          <div class="section-head">
            <div class="topTitle">Terminal</div>
            <div class="controls mini">
              <button class="btn sm" id="toggleTerm">Show</button>
              <button class="btn sm" id="clearTerm">Clear</button>
              <button class="btn sm" id="termScrollBottom" style="display:none">Bottom</button>
            </div>
          </div>
          <div id="termWrap" class="coll" style="display:none"><div id="term" class="logs"></div></div>
        </div>
        <div class="section">
          <div class="section-head">
            <div class="topTitle">Agent/Chat Logs</div>
            <div class="controls mini">
              <button class="btn sm" id="toggleLogs">Show</button>
              <button class="btn sm" id="clearLogs">Clear</button>
            </div>
          </div>
          <div id="logsWrap" class="coll" style="display:none"><div id="logs" class="logs"></div></div>
        </div>
      </aside>

      <section class="canvas">
        <div class="topbar">
          <div class="topTitle" id="projTitle">Flow <span id="watchbar" class="pill paused" style="display:none"></span></div>
          <div class="controls"><button class="btn" id="openInterrupt">Interrupt</button><button class="btn" id="openPalette">Actions ⌘K</button><button class="btn" id="openPlan">Plan</button><button class="btn" id="openMemory">Memory</button></div>
        </div>
        <div class="center-tabs">
          <div class="tabbar">
            <button class="tab active" data-tab="flow">Flow</button>
            <button class="tab" data-tab="short">Short</button>
            <button class="tab" data-tab="long">Long</button>
            <button class="tab" data-tab="structure">Structure</button>
            <button class="tab" data-tab="files">Files</button>
          </div>
          <div class="tabpanes">
            <div id="pane-flow" class="pane show"><svg id="graph"></svg></div>
            <div id="pane-short" class="pane"></div>
            <div id="pane-long" class="pane"></div>
            <div id="pane-structure" class="pane"></div>
            <div id="pane-files" class="pane"></div>
          </div>
        </div>
      </section>

      <aside class="dock">
        <div class="topbar">
          <div class="topTitle">Conversation</div>
          <div class="controls"><a class="btn" href="#" id="exportChat">Export</a><button class="btn" id="clearPins">Clear Pins</button><button class="btn" id="clearChat">Clear Chat</button></div>
        </div>
        <div class="pins" id="pins"></div>
        <div id="chatContext" class="context"></div>
        <div class="chat" id="chat"></div>
        <div class="input">
          <textarea id="ta" placeholder="Type a message…"></textarea>
          <label style="display:flex;align-items:center;gap:6px;user-select:none;font-size:12px;color:var(--text-muted)">
            <input type="checkbox" id="ctlMode" checked /> LLM Control
          </label>
          <button class="btn send" id="send">Send</button>
        </div>
      </aside>
    </div>

    <div id="palette" class="overlay">
      <div class="palBox">
        <input id="palInput" placeholder="Type a command… (e.g., Plan distill ./documents)" />
        <div class="palList" id="palList"></div>
      </div>
    </div>

    <div id="interrupt" class="floatBox">
      <div class="topTitle">Interrupt (Double Message)</div>
      <textarea id="intA" rows="3" placeholder="Message A"></textarea>
      <textarea id="intB" rows="3" placeholder="Message B"></textarea>
      <div class="controls"><button class="btn" id="sendInterrupt">Send Interrupt</button><button class="btn" id="closeInterrupt">Close</button></div>
      <div class="out" id="intOut"></div>
    </div>

    <div id="plan" class="drawer right">
      <div class="drawer-head"><div class="topTitle">Plan</div><div class="controls"><button class="btn" id="closePlan">Close</button></div></div>
      <div id="planBody" class="drawer-body"></div>
    </div>

    <div id="memory" class="drawer bottom">
      <div class="drawer-head"><div class="topTitle">Memory Ladder</div><div class="controls"><button class="btn" id="closeMemory">Close</button></div></div>
      <div id="memBody" class="drawer-body row"></div>
    </div>

    <script src="/app.js"></script>
  </body>
  </html>
